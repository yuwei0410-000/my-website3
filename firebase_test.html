<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Firebase æ¸¬è©¦å„²å­˜è³‡æ–™</title>
</head>
<body>
  <h1>ğŸ”§ Firebase å¯«å…¥æ¸¬è©¦</h1>

  <label>ä½¿ç”¨è€… IDï¼š
    <input type="text" id="userId" value="user001">
  </label><br><br>

  <label>å­¸ç¿’æ¨¡çµ„ï¼š
    <input type="text" id="module" value="battery_simulation">
  </label><br><br>

  <label>ç‹€æ…‹ï¼š
    <input type="text" id="status" value="å·²å®Œæˆ">
  </label><br><br>

  <button onclick="saveProgress()">ğŸ“¤ å„²å­˜åˆ° Firebase</button>

  <p id="result"></p>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    // âœ… ä½ çš„å°ˆæ¡ˆè¨­å®š
    const firebaseConfig = {
      apiKey: "AIzaSyDfFQ0US5aQqwg6rmBAF8SGeW6a0MMmMay",
      authDomain: "s11155037-chimo.firebaseapp.com",
      databaseURL: "https://s11155037-chimo-default-rtdb.firebaseio.com",
      projectId: "s11155037-chimo",
      storageBucket: "s11155037-chimo.appspot.com",
      messagingSenderId: "275168945422",
      appId: "1:275168945422:web:8d556ed6dc43a80977a35f",
      measurementId: "G-3FDWPGVP2F"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // å„²å­˜å­¸ç¿’è³‡æ–™
    window.saveProgress = function () {
      const userId = document.getElementById('userId').value;
      const module = document.getElementById('module').value;
      const status = document.getElementById('status').value;

      set(ref(db, 'users/' + userId + '/' + module), {
        result: status,
        timestamp: new Date().toISOString()
      }).then(() => {
        document.getElementById('result').innerText = "âœ… è³‡æ–™å·²å¯«å…¥ Firebaseï¼";
      }).catch((error) => {
        document.getElementById('result').innerText = "âŒ å¯«å…¥å¤±æ•—ï¼š" + error;
      });
    };
  </script>
</body>
</html>
